<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport"
		content="width=device-width, initial-scale=1.0">
	<title>Langie API SDK Demo</title>
	<script
		src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
	<script src="https://cdn.tailwindcss.com"></script>
	<style>
		/* Dark mode styles */
		.dark {
			color-scheme: dark;
		}

		/* Custom select styles */
		.vs__dropdown-toggle {
			background: white;
			border: 1px solid #d1d5db;
			border-radius: 0.375rem;
			padding: 0.5rem;
		}

		.dark .vs__dropdown-toggle {
			background: #374151;
			border-color: #4b5563;
			color: white;
		}
	</style>
</head>

<body
	class="transition-colors bg-gray-100 dark:bg-gray-900">
	<div id="app"></div>

	<script type="module">
		const { createApp, ref, onMounted, watch, computed } = Vue;

		// Mock useTranslator composable
		const useTranslator = () => {
			const currentLanguage = ref('en');
			const availableLanguages = ref([
				{ value: 'en', name: 'English', native_name: 'English', flag: ['us'] },
				{ value: 'ru', name: 'Russian', native_name: '–†—É—Å—Å–∫–∏–π', flag: ['ru'] },
				{ value: 'es', name: 'Spanish', native_name: 'Espa√±ol', flag: ['es'] },
				{ value: 'fr', name: 'French', native_name: 'Fran√ßais', flag: ['fr'] },
				{ value: 'de', name: 'German', native_name: 'Deutsch', flag: ['de'] },
				{ value: 'it', name: 'Italian', native_name: 'Italiano', flag: ['it'] }
			]);

			const t = (text, context, originalLang) => {
				// Simple translation mock - in real app this would call the API
				const translations = {
					'Translation': {
						'ru': '–ü–µ—Ä–µ–≤–æ–¥',
						'es': 'Traducci√≥n',
						'fr': 'Traduction',
						'de': '√úbersetzung'
					},
					'Interface Language': {
						'ru': '–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞',
						'es': 'Idioma de interfaz',
						'fr': 'Langue d\'interface',
						'de': 'Sprache der Benutzeroberfl√§che'
					},
					'Source Language': {
						'ru': '–ò—Å—Ö–æ–¥–Ω—ã–π —è–∑—ã–∫',
						'es': 'Idioma de origen',
						'fr': 'Langue source',
						'de': 'Quellsprache'
					},
					'Target Language': {
						'ru': '–¶–µ–ª–µ–≤–æ–π —è–∑—ã–∫',
						'es': 'Idioma de destino',
						'fr': 'Langue cible',
						'de': 'Zielsprache'
					},
					'Text to translate': {
						'ru': '–¢–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞',
						'es': 'Texto a traducir',
						'fr': 'Texte √† traduire',
						'de': 'Zu √ºbersetzender Text'
					},
					'Enter text to translate': {
						'ru': '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞',
						'es': 'Ingrese el texto a traducir',
						'fr': 'Entrez le texte √† traduire',
						'de': 'Geben Sie den zu √ºbersetzenden Text ein'
					},
					'Translate': {
						'ru': '–ü–µ—Ä–µ–≤–µ—Å—Ç–∏',
						'es': 'Traducir',
						'fr': 'Traduire',
						'de': '√úbersetzen'
					},
					'Translating': {
						'ru': '–ü–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è',
						'es': 'Traduciendo',
						'fr': 'Traduction',
						'de': '√úbersetzung'
					}
				};

				if (currentLanguage.value === 'en' || !translations[text]) {
					return text;
				}

				return translations[text][currentLanguage.value] || text;
			};

			const translate = async (text, fromLang, toLang) => {
				// Simulate API call
				await new Promise(resolve => setTimeout(resolve, 1000));

				// Mock translation - in real app this would call your translation API
				const mockTranslations = {
					'hello': { 'ru': '–ø—Ä–∏–≤–µ—Ç', 'es': 'hola', 'fr': 'bonjour', 'de': 'hallo' },
					'world': { 'ru': '–º–∏—Ä', 'es': 'mundo', 'fr': 'monde', 'de': 'welt' },
					'good morning': { 'ru': '–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ', 'es': 'buenos d√≠as', 'fr': 'bonjour', 'de': 'guten morgen' }
				};

				const lowerText = text.toLowerCase();
				if (mockTranslations[lowerText] && mockTranslations[lowerText][toLang]) {
					return mockTranslations[lowerText][toLang];
				}

				return `[Translated to ${toLang}] ${text}`;
			};

			const setLanguage = (lang) => {
				currentLanguage.value = lang;
			};

			return {
				t,
				translate,
				currentLanguage,
				availableLanguages,
				setLanguage
			};
		};

		// T Component
		const TComponent = {
			props: {
				ctx: String,
				orig: String
			},
			setup(props, { slots }) {
				const { t } = useTranslator();

				const text = computed(() => {
					if (slots.default) {
						return slots.default()[0].children;
					}
					return '';
				});

				const translated = computed(() => {
					return t(text.value, props.ctx, props.orig);
				});

				return { translated };
			},
			template: '<span>{{ translated }}</span>'
		};

		// Simple Language Select Component
		const LanguageSelect = {
			props: {
				modelValue: String,
				languages: Array
			},
			emits: ['update:modelValue'],
			setup(props, { emit }) {
				const handleChange = (event) => {
					emit('update:modelValue', event.target.value);
				};

				return { handleChange };
			},
			template: `
                <select 
                    :value="modelValue" 
                    @change="handleChange"
                    class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"
                >
                    <option v-for="lang in languages" :key="lang.value" :value="lang.value">
                        {{ lang.native_name }}
                    </option>
                </select>
            `
		};

		// Main App Component
		const App = {
			components: {
				T: TComponent,
				LanguageSelect
			},
			setup() {
				const {
					t,
					translate,
					currentLanguage,
					availableLanguages,
					setLanguage
				} = useTranslator();

				const isDark = ref(false);
				const interfaceLang = ref('en');
				const sourceLang = ref('en');
				const targetLang = ref('ru');
				const textToTranslate = ref('');
				const translation = ref('');
				const error = ref('');
				const isLoading = ref(false);
				const isMounted = ref(false);

				// Available languages except source
				const langsNoSource = computed(() => {
					return availableLanguages.value.filter(lang => lang.value !== sourceLang.value);
				});

				onMounted(() => {
					isMounted.value = true;

					// Load saved values
					const saved = localStorage.getItem('translateText');
					if (saved) textToTranslate.value = saved;

					// Check for dark mode preference
					const darkMode = localStorage.getItem('darkMode') === 'true';
					isDark.value = darkMode;
					updateTheme();
				});

				const toggleTheme = () => {
					isDark.value = !isDark.value;
					localStorage.setItem('darkMode', isDark.value.toString());
					updateTheme();
				};

				const updateTheme = () => {
					if (isDark.value) {
						document.documentElement.classList.add('dark');
					} else {
						document.documentElement.classList.remove('dark');
					}
				};

				const handleTranslate = async () => {
					if (!textToTranslate.value.trim()) {
						error.value = t('Please enter text to translate', 'error', 'en');
						return;
					}

					isLoading.value = true;
					error.value = '';
					translation.value = '';

					try {
						translation.value = await translate(textToTranslate.value, sourceLang.value, targetLang.value);
					} catch (err) {
						console.error('Translation error:', err);
						error.value = t('Translation failed', 'error', 'en');
					} finally {
						isLoading.value = false;
					}
				};

				// Watch interface language changes
				watch(interfaceLang, (newLang) => {
					setLanguage(newLang);
				});

				// Persist text input
				watch(textToTranslate, (val) => {
					localStorage.setItem('translateText', val);
				});

				return {
					t,
					isDark,
					toggleTheme,
					interfaceLang,
					sourceLang,
					targetLang,
					textToTranslate,
					translation,
					error,
					isLoading,
					isMounted,
					availableLanguages,
					langsNoSource,
					handleTranslate
				};
			},
			template: `
                <div class="min-h-screen flex items-center justify-center transition-colors bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100">
                    <div class="p-8 rounded-lg shadow-md w-full max-w-2xl transition-colors bg-white dark:bg-gray-800">
                        <!-- Theme Toggle -->
                        <div class="flex justify-end mb-4">
                            <button 
                                @click="toggleTheme"
                                class="px-3 py-1 text-sm bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors"
                            >
                                {{ isDark ? '‚òÄÔ∏è' : 'üåô' }}
                            </button>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                <T ctx="settings" orig="en">Interface Language</T>
                            </label>
                            <LanguageSelect v-model="interfaceLang" :languages="availableLanguages" class="w-full" />
                        </div>

                        <h1 class="text-2xl font-bold mb-6 text-center">
                            <T ctx="ui" orig="en">Translation</T>
                        </h1>

                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                    <T ctx="translation" orig="en">Source Language</T>
                                </label>
                                <LanguageSelect v-model="sourceLang" :languages="availableLanguages" class="w-full" />
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                    <T ctx="translation" orig="en">Target Language</T>
                                </label>
                                <LanguageSelect v-model="targetLang" :languages="langsNoSource" class="w-full" />
                            </div>
                        </div>

                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                <T ctx="translation" orig="en">Text to translate</T>
                            </label>
                            <input
                                v-model="textToTranslate"
                                type="text"
                                :placeholder="t('Enter text to translate', 'translation', 'en')"
                                class="w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100"
                            />
                        </div>

                        <button
                            :disabled="!isMounted || isLoading || !textToTranslate"
                            class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 transition-colors"
                            @click="handleTranslate"
                        >
                            <template v-if="isLoading">{{ t('Translating', 'translation', 'en') }}...</template>
                            <template v-else>{{ t('Translate', 'translation', 'en') }}</template>
                        </button>

                        <div v-if="translation" class="mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-md">
                            <h2 class="text-lg font-semibold mb-2">
                                <T ctx="translation" orig="en">Translation</T>
                            </h2>
                            <p class="text-gray-800 dark:text-gray-100">{{ translation }}</p>
                        </div>

                        <div
                            v-if="error"
                            class="mt-6 p-4 bg-red-50 text-red-700 dark:bg-red-900 dark:text-red-300 rounded-md"
                        >
                            {{ error }}
                        </div>

                        <!-- Demo Info -->
                        <div class="mt-8 p-4 bg-blue-50 dark:bg-blue-900 rounded-md">
                            <h3 class="text-sm font-semibold mb-2 text-blue-800 dark:text-blue-200">Demo Info</h3>
                            <p class="text-xs text-blue-700 dark:text-blue-300">
                                This is a demo of the Langie API SDK. Try translating: "hello", "world", or "good morning" for mock translations.
                            </p>
                        </div>
                    </div>
                </div>
            `
		};

		createApp(App).mount('#app');
	</script>
</body>

</html>